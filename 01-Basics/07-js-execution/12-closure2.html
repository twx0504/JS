<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12-Closure</title>
  </head>
  <body>
    <script>
      // GO
      // var fn3, fn

      function fn() {
        // var a
        // var b
        // fn2
        var a = 1;
        var b = 2;
        function fn2() {
          var c = 3;
          console.log(a); // use the outer variable a, forming a closure.
          fn3();
          function fn3() {
            // since fn3 uses fn2 and fn variables
            // there are two closures
            // closure fn2 { c = 3 }
            // closure fn { b = 2 }
            console.log(b, c);

            // note: if fn3 only uses fn variable, then it only forms closure with fn, not fn2.
            // comment out below and comment the above code and see.
            // console.log(b);
          }
        }
        return fn2;
      }
      var fn3 = fn(); // fn2 - the closure is kept.
      fn3(); // 1
    </script>
  </body>
</html>
