<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>21-Proxy - GetPrototypeOf</title>
  </head>
  <body>
    <script>
      const obj = {
        a: 1,
        b: 2,
      };

      const proxy = new Proxy(obj, {
        getPrototypeOf(target) {
          // target: the original object
          console.log(target);
          // must return null / object.
          // otherwise, throws: Uncaught TypeError: 'getPrototypeOf' on proxy: trap returned neither object nor null
          return Object.getPrototypeOf(target);
        },
      });

      // The following ways can be intercepted by the getPrototypeOf trap of the proxy.
      console.log(proxy.__proto__);
      // {a: 1, b: 2}
      // {__defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, __lookupSetter__: ƒ, …}
      console.log(proxy instanceof Object);
      // {a: 1, b: 2}
      // true
      console.log(Object.getPrototypeOf(proxy));
      // {a: 1, b: 2}
      // {__defineGetter__: ƒ, __defineSetter__: ƒ, hasOwnProperty: ƒ, __lookupGetter__: ƒ, __lookupSetter__: ƒ, …}
      console.log(Object.prototype.isPrototypeOf(proxy));
      // {a: 1, b: 2}
      // true
    </script>
  </body>
</html>
