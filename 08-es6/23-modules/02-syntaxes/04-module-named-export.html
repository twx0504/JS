<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>04-Module - Named Export</title>
  </head>
  <body>
    <script type="module">
      // {} is required when importing named exports.
      // the imported name must match the export name.

      import { a, fn, b, Person } from "./module2.js";
      console.log(a, b, fn(), Person); // 1 2 3 class Person {}
    </script>

    <script type="module">
      import { m, n, foo } from "./module3.js";
      console.log(m, n, foo()); // 1 2 'foo'
    </script>

    <script type="module">
      // Note: a & b has been given aliases, so when import, it must use the alias.
      //   import { a, b, bar } from "./module4.js"; // ncaught SyntaxError: The requested module './module4.js' does not provide an export named 'a'
      //   console.log(a, b, bar());

      // Use alias to import
      import { x, y, bar } from "./module4.js";
      console.log(x, y, bar()); // 1 2 'bar'
    </script>
    <script type="module">
      // assign alias during import
      // - important if you are using third party library and you want to ensure the consistent naming convention in your project.
      import {
        a as apple,
        b as orange,
        fn as showFavouriteFood,
      } from "./module5.js";

      console.log(apple, orange, showFavouriteFood()); // 04-module-named-export.html:39 apple orange My favourite fruit is orange

      //  When alias is given, you must use the alias.
      //   console.log(a, b, fn); // Uncaught ReferenceError: a is not defined
    </script>

    <script type="module">
      // * import all the exports from a module.
      // - you must assign * an alias to access it.
      import * as obj from "./module6.js";
      console.log(obj); // Module {â€¦}
      // obj.default refers to default export.
      console.log(obj.a, obj.b, obj.c, obj.fn(), obj.Person, obj.default()); // 1 2 3 'fn' class Person {} 'I am default.'

      // Use of destructuring on Module object
      // - the special case is we need to give default a new name because default is a keyword and the variable name cannot be keyword.
      //   const { a, b, c, fn, default: MyDefault } = obj;
      //   console.log(a, b, c, fn(), MyDefault()); // 1 2 3 'fn' 'I am default.'
    </script>

    <script type="module">
      // default export should be put in front of named export when import.
      // you can give default export any name, as long as it is valid js identifier.
      import MyDefault, { a, b, c, fn, Person } from "./module6.js";
      //   import { a, b, c, fn, Person }, MyDefault from "./module6.js"; // Uncaught SyntaxError: Unexpected token ','
      console.log(MyDefault(), a, b, c, fn(), Person); // I am default. 1 2 3 fn class Person {}
    </script>

    <script type="module">
      // named exports are live binding (reference).
      // - it is a live connection to the user in module7.js
      // - user that is imported reflects the change automatically because it is pointing to the same binding.
      import { user } from "./module7.js";
      console.log(user); // twx
      setTimeout(() => { // After 3 sec, user is updated from module7.js
        console.log(user); // too wei xin
      }, 3000);
    </script>
  </body>
</html>
