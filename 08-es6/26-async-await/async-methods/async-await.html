<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Async Await</title>
  </head>
  <body>
    <script type="module">
      import { urls, loadImagePromise } from "./async-methods.js";

      // Async await is the syntathic sugar of Promise + Generator
      // - It allows us to write code like defining a generator function but we don't need to implement the generatorRunner

      async function loadImageAsyncAwait(urls) {
        const imgArr = [];
        for (const url of urls) {
          try {
            const img = await loadImagePromise(url); // similar to Promise.resolve(loadImagePromise(url)).then((data) => {img = data}) or generatorRunner call it.next(img)
            imgArr.push(img);
          } catch (err) {
            console.log(err);
          }
        }
        for (const img of imgArr) {
          document.body.appendChild(img);
        }
      }

      loadImageAsyncAwait(urls);
    </script>
  </body>
</html>
