<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>06-Array - copyWithin</title>
  </head>
  <body>
    <script>
      // copyWithin(target)
      // copyWithin(target, start)
      // copyWithin(target, start, end)
      const arr = [1, 2, 3, 4, 5];
      console.log(arr.copyWithin(3, 0)); // [1, 2, 3, 1, 2]
      console.log(arr); // [1, 2, 3, 1, 2]

      const arr2 = [1, 2, 3, 4, 5, 6];
      // start: negative 2 means two positions from the end.
      // end: not specified, meaning it will be the end of the array.
      // so [5, 6] is copied.
      // and the copied part will be inserted at index 1.
      // since the copied part is only consisted of two elements.
      // only elements of index 1 & 2 gets replaced.
      console.log(arr2.copyWithin(1, -2)); // [1, 5, 6, 4, 5, 6]
      console.log(arr2); // [1, 5, 6, 4, 5, 6]

      const arr3 = [1, 2, 3, 4, 5, 6];
      arr3.copyWithin(0); // arr3.copyWithin(0, 0, 6) //  6 because arr3.length is 6.
      console.log(arr3); //  [1, 2, 3, 4, 5, 6]

      const arr4 = [1, 2, 3, 4, 5, 6];
      arr4.copyWithin(2, 3, 5); // note: end index 5 is not included.
      console.log(arr4); // [1, 2, 4, 5, 5, 6]

      const arr5 = [1, 2, 3, 4, 5, 6];
      arr5.copyWithin(-2, 1);
      console.log(arr5); // [1, 2, 3, 4, 2, 3]

      const arr6 = [1, 2, 3, 4, 5, 6];
      arr6.copyWithin(1, -2, -1);
      console.log(arr6); // [1, 5, 3, 4, 5, 6]

      // Right shift (Right boundary is clipped off, and left boundary is duplicated.)
      const arr7 = [1, 2, 3, 4, 5, 6];
      arr7.copyWithin(2); // similar to arr7.copyWithin(2, 0); but explicitly passed 0 as start may be more readable.
      console.log(arr7); // [1, 2, 1, 2, 3, 4]

      // Empty slots are preserved.
      const arr8 = [1, 2, , , 3, 4, 5];
      arr8.copyWithin(5, 1);
      console.log(arr8); // [1, 2, empty , empty, 3, 2, empty]

      // Important: copyWithin is mutating method, it cannot be used with string which is immutable.
      //   const str = "Hello World";
      //   Array.prototype.copyWithin.call(str, 3); // Cannot assign to read only property '10' of object '[object String]' at String.copyWithin
      //   console.log(str);

      // Note: If an object has length and integer-indexing, it can be used with copyWithin.
      const obj = { 0: "a", 1: "b", 2: "c", 3: "d", 4: "e", length: 5 };
      const arr9 = [].copyWithin.call(obj, 0, 1, 3);
      console.log(arr9); // {0: 'b', 1: 'c', 2: 'c', 3: 'd', 4: 'e', length: 5}
    </script>
  </body>
</html>
