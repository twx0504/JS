<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>03-Class Inheritance</title>
  </head>
  <body>
    <script>
      // Parent
      class A {
        // instance prop
        sum = 44;
        // instance method
        foo() {
          console.log(`Parent ${this.sum}`);
        }
      }
      A.count = 44;
      A.say = function () {
        console.log(this);
      };

      // Child inherits Parent
      //  class B extends A {}
      // Without extends keyword.
      class B {
        constructor() {
          // To inherit instance property from Parent:
          // we can only call super() if we use extends keyword.
          // super(); // Uncaught SyntaxError: 'super' keyword unexpected here
          // Fundamentally, it calls Parent constructor.
          // But "this" has problem here.
          // It will be the job of the JS engine to handle all these.
          // Almost like this but not quite:  A.prototype.constructor.call(this);
          // But in class, you can only call constructor with new.
          // new A.prototype.constructor();
          // But this cannot modify this.
          // In conclusion, ES5 cannot fully implement this.
        }
      }

      // How ES6 Class inheritance works?
      // 1. static properties / methods
      Object.setPrototypeOf(B, A);
      //   B.__proto__ = A;
      console.log(B.count);
      A.say();
      B.say();

      // 2. instance methods

      Object.setPrototypeOf(B.prototype, A.prototype);
      //   B.prototype.__proto__ = A.prototype;
      // Something like:
      //   const b = new B();
      //   b.__proto__ = B.prototype;
      //   b.__proto__.__proto__ = A.prototype;
      const b = new B();
      console.log(b);
      b.foo(); // Parent undefined - note: since sum has not yet inherited so it is undefined

      // 3. instance properties (super)
      // - we cannot implement manually.
      // - it can only be implemented by JS engine.
    </script>
  </body>
</html>
