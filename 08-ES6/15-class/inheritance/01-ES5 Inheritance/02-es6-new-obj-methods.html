<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>02-ES6 New Object Methods</title>
  </head>
  <body>
    <script>
      const obj = {};

      // #1: Object.getPrototypeOf(object): return the prototype of the specified object.
      // similar to getting the prototype of obj via obj.__proto__
      // note: In ES5, if obj parameter isn't an object, it throws a TypeError.
      // In ES2015 (ES6+) the obj parameter will coerced to an Object.
      console.log(Object.getPrototypeOf(obj));
      console.log(Object.getPrototypeOf(obj) === Object.prototype); // true

      console.log(Object.getPrototypeOf(1)); // Number {0, toExponential: ƒ, toFixed: ƒ, toPrecision: ƒ, toString: ƒ, …}
      console.log(Object.getPrototypeOf(1) === Number.prototype); // true
      // instance.__proto__ === Constructor.prototype e.g., {}.__proto__ === Object.prototype.

      // #2: Object.setPrototypeOf(obj, prototype): set the prototype of a specified object.
      // similar to setting the prototype of obj via obj.__proto__ = prototype
      const obj1 = {
        a: 1,
        b: 2,
      };

      const obj2 = {
        c: 3,
      };

      // We want obj2.__proto__ = obj1
      // So when we access property a & b on the obj2, if it is not found, it will find it from the prototype chain.
      // obj2.__proto__ = obj1; // But we can't use this in production.
      // We can use this method:
      Object.setPrototypeOf(obj2, obj1);
      console.log(obj2.a); // 1
      console.log(obj2.b); // 2

      // Important Note:
      // #1: if you attempt to modify the prototype of a special object e.g., window / Object.prototype, it throws TypeError.
      // Imagine we can modify the window's prototype, everything will be out of control, and the browser is not longer safe, and people could attack the browser.

      // Object.setPrototypeOf(window, {}); // Uncaught TypeError: Immutable prototype object '#<Window>' cannot have their prototype set
      // Object.setPrototypeOf(Object.prototype, null); // Working - because the prototype of Object.prototype is null.

      // However, this is an exception. When you set it to anything other than null.
      // Object.setPrototypeOf(Object.prototype, {}); // Uncaught TypeError: Immutable prototype object 'Object.prototype' cannot have their prototype set
    </script>
  </body>
</html>
