<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05-WeakMap - Application 1 - Data Caching</title>
  </head>
  <body>
    <script>
      // there's an age property on the user object.
      // We would like to validate the age, and get their age group.
      // Junevile
      // Young Adult
      // Middle-aged
      // Senior

      const ageGroupCache = new WeakMap();
      function getAgeGroup(usr) {
        if (ageGroupCache.has(usr)) {
          console.log("use ageGroupCache.");
          return ageGroupCache.get(usr);
        }

        if (!Number.isFinite(usr.age) || usr.age < 0) {
          return "Invalid Age";
        }

        let ageGroup;
        const age = usr.age;

        if (age <= 18) {
          ageGroup = "Juvenile";
        } else if (age <= 38) {
          ageGroup = "Young Adult";
        } else if (age <= 48) {
          ageGroup = "Middle-aged";
        } else {
          ageGroup = "Senior";
        }

        ageGroupCache.set(usr, ageGroup);
        return ageGroup;
      }
      const person = {
        age: 25,
      };
      const person2 = {
        age: 60,
      };
      const person3 = {
        age: 10,
      };

      console.log(getAgeGroup(person));
      console.log(getAgeGroup(person2));
      console.log(getAgeGroup(person3));
      console.log(getAgeGroup(person));
      console.log(getAgeGroup(person2));
      console.log(getAgeGroup(person3));
    </script>
  </body>
</html>
