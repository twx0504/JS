<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>03-Event Loop</title>
  </head>
  <body>
    <script>
      // Macrotask
      setTimeout(() => {
        console.log("ok");
      });

      new Promise((resolve, reject) => {
        // Sync Task
        console.log(1);
        resolve();
      })
        // Microtasks
        .then(() => {
          // then 2
          console.log(2);
          // return a fulfilled Promise with undefined.
          // and then call its then method
          // this schedules the callback.
          // same goes to the rest of then().
        })
        .then(() => {
          // then 3
          console.log(3);
        })
        .then(() => {
          // then 4
          console.log(4);
        })
        .then(() => {
          // then 5
          console.log(5);
        });

      new Promise((resolve, reject) => {
        // Sync Task
        console.log(10);
        resolve();
      })
        // Microtask
        .then(() => {
          // then 20
          console.log(20);
          // return a fulfilled Promise with undefined.
          // and then call its then method
          // this schedules the callback.
          // same goes to the rest of then().
        })
        .then(() => {
          // then 30
          console.log(30);
        })
        .then(() => {
          // then 40
          console.log(40);
        })
        .then(() => {
          // then 50
          console.log(50);
        });

        new Promise((resolve, reject) => {
        // Sync Task
        console.log(100);
        resolve();
      })
        // Microtask
        .then(() => {
          // then 200
          console.log(200);
          // return a fulfilled Promise with undefined.
          // and then call its then method
          // this schedules the callback.
          // same goes to the rest of then().
        })
        .then(() => {
          // then 300
          console.log(300);
        })
        .then(() => {
          // then 400
          console.log(400);
        })
        .then(() => {
          // then 500
          console.log(500);
        });

      // Microtask Queue: [then 2, then 20, then 200,  then 3, then 30, then 300, then 4, then 40, then 400, then 5, then 50, then 500] => it looks alternate
      // Macrotask Queue: [timeout]

      // 1
      // 10
      // 100
      // 2
      // 20
      // 200
      // 3
      // 30
      // 300
      // 4
      // 40
      // 400
      // 5
      // 50
      // 500
      // ok
    </script>
  </body>
</html>
