<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01-Event Loop</title>
  </head>
  <body>
    <div>Main Content</div>
    <script>
      // Synchronous
      console.log("Synchronous Task Begins---");

      // Synchronous - But the rendering happens after Microtask.
      const div = document.createElement("div");
      div.innerHTML = "New Content";
      document.body.appendChild(div);

      const list = document.querySelectorAll("div");
      console.log("Number of divs----", list.length);

      // Macrotask
      setTimeout(() => {
        console.log("Code in Timeout");
        // Blocking until we click confirm.
        alert("Blocking Timeout");
      });

      // Synchronous
      console.log("Synchronous Task In Progress----");

      // Microtask
      Promise.resolve().then(() => {
        console.log("Code in Promise");
        // Blocking until we click confirm.
        alert("Blocking Promise");
      });

      // Synchronous
      console.log("Synchronous Task Ends----");

      // Synchronous Task Begins
      // Number of divs 2
      // Synchronous Task In Progress
      // Synchronous Task Ends
      // Code in Promise
      // Blocking Promise
      // Code In Timeout
      // Blocking Timeout
      
      // Flow of Execution:
      // Synchronous -> Microtask -> DOM Rendering (Display content for viewers - just for some understanding.) -> MacroTask
      // Note: Browser refreshes every 16.67ms so there might be some small differences for DOM Rendering.
      // The content of DOM will be displayed after Microtask (clicking confirm of alert popup in Promise code)
    </script>
  </body>
</html>
