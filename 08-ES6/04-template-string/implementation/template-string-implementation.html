<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01-Template String Implementation</title>
  </head>
  <body>
    <script>
      var obj = {
        name: "twx",
        age: 25,
      };

      let str = "Hi, I am ${obj.name}, I am ${obj.age} years old.";

      let str2 = `Hi, I am ${obj.name}, I am ${obj.age} years old.`;
      console.log(str);
      console.log(str2);

      const reg = /\${([\w.]+?)}/g;

      str = str.replace(reg, function (match, p1) {
        // var val = p1.split(".")[0];
        // var key = p1.split(".")[1];
        return eval(p1); // eval is able to process string.
      });
      console.log(str);
      eval("let a=1;let b = 2; console.log(a+b)");
      const val = eval("obj.name");
      console.log(val);

      function parseString(str) {
        const reg = /\${(.+?)}/g;
        str = str.replace(reg, function (_, p1) {
          return eval(p1); // eval is able to process string.
        });
        return str;
      }

      console.log(
        parseString("Hi, I am ${obj.name}, I am ${obj.age} years old.")
      );

      let a = 1;
      let b = 2;
      let msg = "a+b=${a+b}";
      console.log(parseString(msg));
    </script>
  </body>
</html>
