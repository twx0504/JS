<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>01-Weak Set</title>
  </head>
  <body>
    <script>
      // Feature:
      // 1. Held weak reference to objects.
      // 2. Member must be objects or non-registered symbols.

      const obj = { a: 1 };
      const arr = [1, 2, 3];
      const ws = new WeakSet([obj, arr]);
      console.log(ws);
      const ws2 = new WeakSet();

      // add - support method chainig
      ws2.add(obj).add(arr);
      console.log(ws2);

      // 1. WeakSet can only hold object & non-registered symbols.

      // Its member must be object.
      //   const a = 1;
      //   const b = 2;
      //   const ws3 = new WeakSet([a, b]); // Uncaught TypeError: Invalid value used in weak set

      // 2. WeakSet do not follow the insertion order.
      // 3. WeakSet member are unique.
      const obj3 = { a: 1 };
      const obj4 = { a: 2 };
      const obj5 = { a: 10 };
      const ws3 = new WeakSet([obj3, obj4, obj3, obj3, obj4, obj5]);
      console.log(ws3); // WeakSet {{…}, {…}, {…}}

      console.log(ws3.delete(obj5)); // true - indicating successfully deleted.
      console.log(ws3); // WeakSet {{…}, {…}}
      console.log(ws3.has(obj5)); // false
    </script>
  </body>
</html>
