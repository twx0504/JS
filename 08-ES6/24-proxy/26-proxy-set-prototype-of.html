<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>26-Proxy - SetPrototypeOf</title>
  </head>
  <body>
    <script>
      const arr = [];
      Object.preventExtensions(arr);
      const proxy = new Proxy(arr, {
        setPrototypeOf(target, prototype) {
          Object.setPrototypeOf(target, prototype);
          return true;
        },
      });

      try {
        // Object.setPrototypeOf(proxy, Array.prototype); // This one doesn't throw, as Array.prototype is already the prototype of arr.
        Object.setPrototypeOf(proxy, Object.prototype); // Attempt to change the prototype to other prototype when the obj is inextensible throws.
      } catch (err) {
        console.log(err); // TypeError: [object Array] is not extensible
      }
    </script>
  </body>
</html>
