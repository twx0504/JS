<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05-Proxy - Set</title>
  </head>
  <body>
    <script>
      "use strict"; // use strict mode.
      const obj = {
        a: 1,
        b: 2,
      };

      const proxy = new Proxy(obj, {
        set(target, key, val, receiver) {
          console.log(target);
          console.log(key);
          console.log(val);
          console.log(receiver);
          target[key] = val;
          // in set handler, we will usually write a return value and the value is a Boolean type.
          // This is to make sure it has no problem when the script is in strict mode.
          // Note: returning false will throw error in strict mode.
          return true; // assignment allowed.
          // return false; // - assignment not allowed.
          
        },
      });

      // {a: 1, b: 2}
      // "a"
      // "set"
      // Proxy(Object)Â {a: 1, b: 2}
      console.log(proxy.a); // modified.
    </script>
  </body>
</html>
