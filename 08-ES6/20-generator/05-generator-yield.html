<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>05-Generator - yield</title>
  </head>
  <body>
    <script>
      // Problem: Calling another generator inside current generator does nothing.
      //   function* foo() {
      //     yield 1;
      //     const it2 = bar(); // it only create an iterator but it never does thing.
      //     // we want an effect like this:
      //     // yield 3;
      //     // yield 4;
      //     console.log(it2);
      //     yield 2;
      //   }

      //   function* bar() {
      //     console.log("ss");
      //     yield 3;
      //     yield 4;
      //   }

      //   const it = foo();
      //   console.log(it.next()); // {value: 1, done: false}
      //   console.log(it.next());
      //   // barÂ {<suspended>}
      //   // {value: 2, done: false}
      //   console.log(it.next()); // {value: undefined, done: true}

      // yield * can solve this problem.
      function* foo() {
        yield 1;
        yield* bar();
        // yield* bar() is equivalent to:
        // yield 3;
        // yield 4;
        // OR
        // for (const v of bar()) {
        //     yield v; // yield 3; yield 4;
        // }
        yield 2;
      }

      function* bar() {
        yield 3;
        yield 4;
      }

      const it = foo();
      console.log(it.next()); // {value: 1, done: false}
      console.log(it.next()); // {value: 3, done: false}
      console.log(it.next()); // {value: 4, done: false}
      console.log(it.next()); // {value: 2, done: false}
      console.log(it.next()); // {value: undefined, done: true}

      // yield* expression
      // where expression can be an iterator or iterable (Array, Map, Set, Array-like, etc.).

      //   function* gen2() {
      //     yield 1;
      //     yield* ["a", "b", "c"];
      //     yield 2;
      //     // for (const v of ["a", "b", "c"]) {
      //     //     yield v;
      //     // }
      //   }
      //   const it2 = gen2(); // {value: 1, done: false}
      //   console.log(it2.next());
      //   console.log(it2.next()); // {value: 'a', done: false}
      //   console.log(it2.next()); // {value: 'b', done: false}
      //   console.log(it2.next()); // {value: 'c', done: false}
      //   console.log(it2.next()); // {value: 2, done: false}
      //   console.log(it2.next()); // {value: undefined, done: true}

      function* gen3() {
        yield "hello";
        yield* "hello";
        // yield "h"
        // yield "e"
        // yield "l"
        // yield "l"
        // yield "o"
        yield [1, 2, 3];
        yield* [1, 2, 3];
        // yield 1
        // yield 2
        // yield 3
      }

      const it3 = gen3();
      console.log(it3.next()); // value: 'hello', done: false}
      console.log(it3.next()); // {value: 'h', done: false}
      console.log(it3.next()); // {value: 'e', done: false}
      console.log(it3.next()); // {value: 'l', done: false}
      console.log(it3.next()); // {value: 'l', done: false}
      console.log(it3.next()); // {value: 'o', done: false}
      console.log(it3.next()); // {value: [1, 2, 3], done: false}
      console.log(it3.next()); // {value: 1, done: false}
      console.log(it3.next()); // {value: 2, done: false}
      console.log(it3.next()); // {value: 3, done: false}
      console.log(it3.next()); // {value: undefined, done: true}
    </script>
  </body>
</html>
